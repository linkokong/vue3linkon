import{_ as ee}from"./ExpansionPanel.vue_vue_type_style_index_0_lang-D9psg00O.js";import{p as te,ae as le,bd as L,be as ne,h as ae,a$ as ue,af as oe,ag as ie,i as d,k as y,K as se,L as re,aB as ce,bf as _,bg as de,ah as j,bh as fe,l as i,bi as ve,aj as V,F as k,bj as me,bk as pe,x as he,bl as ye,d as ge,o as U,a as $,w as be,u as I,t as Ce,bm as Ve,aQ as ke}from"./index-DCBbo-ZP.js";function Ie(e,o=0){return new Promise(c=>{const u=document.createElement("video");u.currentTime=o,u.muted=!0,u.autoplay=!0,u.src=URL.createObjectURL(e),u.oncanplay=()=>{const l=document.createElement("canvas");l.width=u.videoWidth,l.height=u.videoHeight,l.getContext("2d").drawImage(u,0,0,l.width,l.height),l.toBlob(a=>{const v=URL.createObjectURL(a);c({blob:a,url:v})})}})}const we=te({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...le({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>L(e).every(o=>o!=null&&typeof o=="object")},...ne({clearable:!0})},"VFileInput"),Fe=ae()({name:"VFileInput",inheritAttrs:!1,props:we(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,o){let{attrs:c,emit:u,slots:l}=o;const{t:f}=ue(),a=oe(e,"modelValue",e.modelValue,t=>L(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:v,focus:N,blur:M}=ie(e),w=d(()=>typeof e.showSize!="boolean"?e.showSize:void 0),F=d(()=>(a.value??[]).reduce((t,n)=>{let{size:m=0}=n;return t+m},0)),S=d(()=>_(F.value,w.value)),b=d(()=>(a.value??[]).map(t=>{const{name:n="",size:m=0}=t;return e.showSize?`${n} (${_(m,w.value)})`:n})),D=d(()=>{var n;const t=((n=a.value)==null?void 0:n.length)??0;return e.showSize?f(e.counterSizeString,t,S.value):f(e.counterString,t)}),R=y(),P=y(),s=y(),E=d(()=>v.value||e.active),B=d(()=>["plain","underlined"].includes(e.variant));function C(){var t;s.value!==document.activeElement&&((t=s.value)==null||t.focus()),v.value||N()}function O(t){var n;(n=s.value)==null||n.click()}function T(t){u("mousedown:control",t)}function G(t){var n;(n=s.value)==null||n.click(),u("click:control",t)}function H(t){t.stopPropagation(),C(),he(()=>{a.value=[],ye(e["onClick:clear"],t)})}return se(a,t=>{(!Array.isArray(t)||!t.length)&&s.value&&(s.value.value="")}),re(()=>{const t=!!(l.counter||e.counter),n=!!(t||l.details),[m,K]=de(c),{modelValue:Se,...Q}=j.filterProps(e),W=fe(e);return i(j,V({ref:R,modelValue:a.value,"onUpdate:modelValue":p=>a.value=p,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":B.value},e.class],style:e.style,"onClick:prepend":O},m,Q,{centerAffix:!B.value,focused:v.value}),{...l,default:p=>{let{id:g,isDisabled:h,isDirty:z,isReadonly:A,isValid:q}=p;return i(ve,V({ref:P,"prepend-icon":e.prependIcon,onMousedown:T,onClick:G,"onClick:clear":H,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},W,{id:g.value,active:E.value||z.value,dirty:z.value||e.dirty,disabled:h.value,focused:v.value,error:q.value===!1}),{...l,default:J=>{var x;let{props:{class:X,...Y}}=J;return i(k,null,[i("input",V({ref:s,type:"file",readonly:A.value,disabled:h.value,multiple:e.multiple,name:e.name,onClick:r=>{r.stopPropagation(),A.value&&r.preventDefault(),C()},onChange:r=>{if(!r.target)return;const Z=r.target;a.value=[...Z.files??[]]},onFocus:C,onBlur:M},Y,K),null),i("div",{class:X},[!!((x=a.value)!=null&&x.length)&&!e.hideInput&&(l.selection?l.selection({fileNames:b.value,totalBytes:F.value,totalBytesReadable:S.value}):e.chips?b.value.map(r=>i(me,{key:r,size:"small",text:r},null)):b.value.join(", "))])])}})},details:n?p=>{var g,h;return i(k,null,[(g=l.details)==null?void 0:g.call(l,p),t&&i(k,null,[i("span",null,null),i(pe,{active:!!((h=a.value)!=null&&h.length),value:D.value,disabled:e.disabled},l.counter)])])}:void 0})}),ce({},R,P,s)}}),Be=ge({__name:"GetVideoFrameImg",setup(e){const o=y(null),c=y(null);async function u(){const l=await Ie(o.value,1);c.value=l.url,console.log(l)}return(l,f)=>(U(),$(ee,{title:"利用canvas获取一个视频中某一秒的播放画面"},{"text-content":be(()=>[i(Fe,{label:"上传一个视频",variant:"outlined",chips:"",modelValue:I(o),"onUpdate:modelValue":f[0]||(f[0]=a=>Ce(o)?o.value=a:null),onChange:u},null,8,["modelValue"]),I(c)?(U(),$(Ve,{key:0,width:300,"aspect-ratio":"16/9",cover:"",src:I(c)},null,8,["src"])):ke("",!0)]),_:1}))}});export{Be as default};
